CPU、内存、IO设备三者速度的差异，为了合理利用CPU的高性能，平衡3者之间的速度差异，系统做了如下优化
1. CPU增加了缓存，以均衡与内存的速度差异
1. 操作系统增加了进程、线程，以分时复用CPU，进而均衡CPU与IO设备的程度差异
1. 编译程序优化指令执行次序，使得缓存能够得到更加合理的利用

并发编程的问题根源也在这里，主要有如下3个方面

- **缓存导致的可见性问题**
> 一个线程对共享变量的修改，另外一个线程能够立即看到，称为可见性。

在多核时候，每颗CPU都有自己的缓存，这时CPU缓存与内存的数据一致性就没有那么容易解决
- **线程切换带来的原子性问题**
> 把一个或多个操作在CPU执行的过程中不被中断的特性称为原子性。

CPU能保证的原子操作是CPU指令级别的，而不是高级语言的操作符

- **编译优化带来的有序性问题**
> 有序性指的是程序按照代码的先后顺序执行
编译器为了优化性能，有时候会改变语句中的先后顺序